---
title: 正则表达式基础教学详解
published: 2025-12-31
tags: [教程]
category: 编程
draft: false
---

<iframe width="100%" height="468" src="//player.bilibili.com/player.html?bvid=BV1fm411C7fq&cid=1532051992&isOutside=true&autoplay=0" frameborder="0" scrolling="no" allowfullscreen></iframe>

## 一、重复匹配符：控制字符出现次数
这类符号用于限定**单个字符/子表达式**的出现次数，是正则中最基础且常用的规则。

| 匹配符 | 含义 | 示例 | 匹配结果说明 |
|--------|------|------|--------------|
| `d?`   | 字符d出现0次或1次 | `do?g` | 匹配 `dg`（o出现0次）、`dog`（o出现1次），不匹配 `doog` |
| `a*`   | 字符a出现0次、1次或多次 | `a*b` | 匹配 `b`（a0次）、`ab`（a1次）、`aaaab`（a4次） |
| `a+`   | 字符a出现1次及以上（至少1次） | `a+b` | 匹配 `ab`、`aab`，不匹配 `b` |
| `a{6}` | 字符a恰好出现6次 | `a{6}` | 匹配 `aaaaaa`，不匹配 `aaaaa` 或 `aaaaaaa` |
| `a{2,}`| 字符a出现2次及以上 | `a{2,}` | 匹配 `aa`、`aaaa`，不匹配 `a` |
| `a{2,6}`| 字符a出现2~6次（包含2和6） | `a{2,6}` | 匹配 `aa`、`aaaaa`，不匹配 `a`、`aaaaaaa` |

### 注意
重复匹配符默认作用于**紧邻的前一个字符**，若需控制多个字符的重复次数，需结合括号（子表达式）。

## 二、多字符匹配：括号分组
通过 `()` 将多个字符包裹为「子表达式」，使重复匹配符作用于整个分组，而非单个字符。

| 语法 | 含义 | 示例 | 匹配结果说明 |
|------|------|------|--------------|
| `(ab)+` | 子表达式`ab`出现1次及以上 | `(ab)+` | 匹配 `ab`、`abab`、`ababab`，不匹配 `aab`、`abb` |

## 三、或运算：分支匹配
通过 `|` 实现“二选一/多选一”的匹配逻辑，需注意**括号对匹配范围的限定**。

| 语法 | 含义 | 示例 | 匹配结果说明 |
|------|------|------|--------------|
| `a (cat|dog)` | 匹配 `a cat` 或 `a dog`（括号限定或范围） | `a (cat|dog)` | 匹配 `a cat`、`a dog`，不匹配 `acat`、`adog` |
| `a cat|dog` | 匹配 `a cat` 或 `dog`（无括号时，`|` 分隔整个左侧/右侧） | `a cat|dog` | 匹配 `a cat`、`dog`，不匹配 `a dog` |

### 关键提醒
无括号时，`|` 的作用范围是**整个正则的左右两侧**，而非紧邻的字符，务必用括号精准限定或的范围。

## 四、字符类：批量匹配字符
用 `[]` 定义“字符集合”，匹配集合中**任意一个字符**，支持范围简写和取反操作。

### 基础用法
| 语法 | 含义 | 示例 | 匹配结果说明 |
|------|------|------|--------------|
| `[abc]+` | 匹配由a、b、c组成的任意长度字符串（至少1个） | `[abc]+` | 匹配 `a`、`ab`、`aabbcc`、`bc`，不匹配 `d`、`123` |
| `[a-zA-Z0-9]` | 匹配任意大小写字母或数字（范围简写） | `[a-zA-Z0-9]` | 匹配 `A`、`b`、`9`，不匹配 `@`、`空格` |

### 取反操作（^）
| 语法 | 含义 | 示例 | 匹配结果说明 |
|------|------|------|--------------|
| `[^0-9]` | 匹配除0-9数字外的任意字符（包含换行符） | `[^0-9]` | 匹配 `a`、`@`、`空格`、`\n`，不匹配 `5`、`8` |

### 注意
字符类中 `^` 仅在**第一个位置**时表示取反，若在其他位置则仅表示普通字符 `^`（如 `[0-9^]` 匹配数字或 `^`）。

## 五、元字符：预定义字符集合
正则提供了预定义的元字符（转义符），简化常用字符集合的书写，需注意**大小写元字符互为反义**。

| 元字符 | 含义 | 示例 | 匹配结果说明 |
|--------|------|------|--------------|
| `\d`   | 匹配任意数字字符（等价于 `[0-9]`） | `\d+` | 匹配 `123`、`45`，不匹配 `abc`、`@` |
| `\D`   | 匹配任意非数字字符（等价于 `[^0-9]`） | `\D` | 匹配 `a`、`空格`，不匹配 `8` |
| `\w`   | 匹配单词字符（字母、数字、下划线，等价于 `[a-zA-Z0-9_]`） | `\w+` | 匹配 `hello`、`user_123`，不匹配 `@#`、`空格` |
| `\W`   | 匹配非单词字符（等价于 `[^a-zA-Z0-9_]`） | `\W` | 匹配 `@`、`！`、`空格`，不匹配 `a`、`5`、`_` |
| `\s`   | 匹配空白符（空格、换行符 `\n`、制表符 `\t` 等） | `\s` | 匹配 ` `（空格）、`\n`、`\t`，不匹配 `a`、`1` |
| `\S`   | 匹配非空白符 | `\S` | 匹配 `a`、`9`、`@`，不匹配 `空格`、`\n` |
| `\b`   | 单词边界（单词与非单词的分隔处，如字母和符号、字母和空格之间） | `\bcat\b` | 匹配 `cat`（独立单词），不匹配 `category` 中的 `cat` |
| `\B`   | 非单词边界（单词与单词、符号与符号之间） | `\Bcat\B` | 匹配 `category` 中的 `cat`，不匹配独立的 `cat` |
| `.`    | 匹配任意字符（**不包含换行符**） | `a.b` | 匹配 `a1b`、`a@b`，不匹配 `a\nb` |
| `\.`   | 匹配普通字符 `.`（通过 `\` 转义） | `www\.com` | 匹配 `www.com`，不匹配 `www1com` |

## 六、行首/行尾匹配
| 语法 | 含义 | 示例 | 匹配结果说明 |
|------|------|------|--------------|
| `^`  | 匹配行的开头（需放在正则最前） | `^hello` | 匹配以 `hello` 开头的行，如 `hello world`，不匹配 `world hello` |
| `$`  | 匹配行的结尾（需放在正则最后） | `world$` | 匹配以 `world` 结尾的行，如 `hello world`，不匹配 `world hello` |

### 示例组合
`^[a-z]+$`：匹配整行仅由小写字母组成的字符串（无其他字符）。

## 七、贪婪匹配 vs 懒惰匹配
正则默认是**贪婪匹配**（尽可能匹配更多字符），通过在重复符后加 `?` 可切换为**懒惰匹配**（尽可能匹配更少字符）。

### 核心示例
待匹配字符串：`<strong><b>https://www.wondershare.com</strong></b>`

| 正则 | 匹配模式 | 匹配结果 | 原因 |
|------|----------|----------|------|
| `<.+>` | 贪婪匹配 | 匹配整个字符串 `<strong><b>https://www.wondershare.com</strong></b>` | `+` 贪婪匹配，从第一个 `<` 开始，直到最后一个 `>` 才停止 |
| `<.+?>` | 懒惰匹配 | 分别匹配 `<strong>`、`<b>`、`</strong>`、`</b>` | `+?` 懒惰匹配，匹配到第一个 `>` 就停止，仅匹配单个标签 |

### 常见懒惰匹配符
| 贪婪符 | 懒惰符 | 含义 |
|--------|--------|------|
| `*`    | `*?`   | 匹配0次或多次，尽可能少匹配 |
| `+`    | `+?`   | 匹配1次或多次，尽可能少匹配 |
| `{n,}` | `{n,}?`| 匹配n次及以上，尽可能少匹配 |
| `{n,m}`| `{n,m}?`| 匹配n~m次，尽可能少匹配 |

## 总结
1. 重复匹配符作用于紧邻字符，多字符需用 `()` 分组；
2. `|` 的作用范围需用括号限定，避免匹配范围错误；
3. 字符类 `[]` 匹配单个字符，`^` 在开头表示取反；
4. 元字符大小写互为反义，`.` 不匹配换行符，需转义的字符（如 `.`）用 `\` 处理；
5. 贪婪/懒惰匹配是正则优化的关键，按需选择可精准匹配目标内容。

掌握以上规则，可覆盖绝大多数字符串匹配场景，建议结合实际案例多练习，加深对匹配逻辑的理解。